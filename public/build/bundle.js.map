{"version":3,"sources":["webpack://codex.notes/webpack/bootstrap","webpack://codex.notes/./node_modules/@codexteam/shortcuts/lib/shortcuts.js","webpack://codex.notes/./public/javascripts/app.js","webpack://codex.notes/./public/javascripts/aside-swiper.js","webpack://codex.notes/./public/javascripts/aside.js","webpack://codex.notes/./public/javascripts/auth-observer.js","webpack://codex.notes/./public/javascripts/autoresizer.js","webpack://codex.notes/./public/javascripts/connection-observer.js","webpack://codex.notes/./public/javascripts/dialog.js","webpack://codex.notes/./public/javascripts/dom.js","webpack://codex.notes/./public/javascripts/editor.js","webpack://codex.notes/./public/javascripts/folder-settings.js","webpack://codex.notes/./public/javascripts/folder.js","webpack://codex.notes/./public/javascripts/note.js","webpack://codex.notes/./public/javascripts/status-bar.js","webpack://codex.notes/./public/javascripts/swipe-detector.js","webpack://codex.notes/./public/javascripts/user.js","webpack://codex.notes/./public/javascripts/utils/clipboard.js","webpack://codex.notes/./public/javascripts/utils/validate.js","webpack://codex.notes/./public/stylesheets/base.css","webpack://codex.notes/external \"electron\""],"names":["electron","require","Editor","default","Aside","Note","window","ipcRenderer","webFrame","setVisualZoomLevelLimits","documentReady","codex","notes","editor","aside","note","user","statusBar","connectionObserver","authObserver","onLogin","fillUserPanel","folderSettings","toggleCollaboratorInput","login","userData","on","event","response","addToMenu","openExternalLink","target","tagName","href","closest","shell","openExternal","metaKey","ctrlKey","module","exports","document","addEventListener","SwipeDetector","AsideSwiper","opened","closed","CSS","wrapper","toggled","left","right","querySelector","directionRight","open","close","classList","add","remove","$","menuItemTitleMaxLength","notesMenuLoading","noteListItem","notSeenState","notesMenu","foldersMenu","swiper","folderOpened","folderClosed","currentFolder","previouslyOpenedFolder","loadNotes","loadFolders","userFolders","innerHTML","forEach","addFolder","folder","isRootFolder","addMenuItem","newNoteButtons","querySelectorAll","button","newNoteButtonClicked","newFolderButton","newFolderField","newFolderInput","newFolderButtonClicked","newFolderInputFilled","folderCloseToggler","get","closeFolder","activateScrollableGradient","isRemoved","removeMenuItem","_id","title","removeFolderFromMenu","folderId","Promise","sendSync","resolve","catch","console","log","error","send","focusEditor","clear","input","focus","key","folderTitle","value","trim","createdFolder","noteData","titleLabel","warn","existingNote","textContent","createMenuItemTitle","checkUnreadStatus","item","makeMenuItem","id","insertAdjacentElement","menuItemClicked","folderItem","updateFolderTitleInMenu","folderClicked","dataset","make","length","substring","itemId","menu","menuItem","render","editorView","scrollIntoView","markNoteAsRead","assert","minimumDistance","scrolledModificator","scrollableZones","addClassOnScroll","scrollableContent","scrollableWrapper","parentNode","scrollTop","zone","noteIds","Array","isArray","once","unreadStates","noteId","noteUnread","markNoteAsUnread","noteInAside","AuthObserver","onLogout","_loggedIn","token","Autoresizer","elements","i","addResizer","el","style","height","scrollHeight","enterKeyPressed","resize","bind","keyCode","preventDefault","removeEventListener","removeResizer","ConnectionObserver","navigator","onLine","online","offline","text","loading","sync","then","time","returnedData","timeEnd","reconnect","remote","Dialog","browserWindow","getCurrentWindow","setSheetOffset","width","choice","dialog","showMessageBox","type","buttons","message","DOM","classNames","attributes","createElement","attrName","parent","appendChild","nodeToReplace","replaceWith","replaceChild","elementId","getElementById","path","instanceName","resourcePrefix","reject","includes","node","toLowerCase","async","defer","charset","rel","timerLabel","onload","onerror","src","head","newNode","referenceNode","plugins","autosaveTimer","loadEditor","loadPlugins","init","all","loadResource","err","pluginsQuery","push","name","config","holderId","initialBlockPlugin","hideToolbar","placeholder","tools","iconClassname","validate","save","destroy","makeSettings","paragraph","allowedToPaste","showInlineToolbar","allowRenderOnPaste","header","displayInToolbox","start","setTimeout","enableAutosave","clearTimeout","noteTitle","autosave","nodes","redactor","Validate","FolderSettings","toggler","closeButton","removeFolderButton","folderTitleInput","getElementsByName","newMemberInput","loginButton","membersList","toggle","removeFolderClicked","changeTitleKeydown","inviteMemberKeydown","showAuth","collaborator","addCollaborator","body","panelOpenedModifier","result","delete","fieldset","email","wobble","success","collaborators","newMemberItem","ava","memberEmailClasses","photo","append","emailWrapper","newMemberEmail","visibleCharsCount","loggedIn","Folder","_title","folderTitleElement","folderData","showCollaborators","notesListWrapper","setNoteSeenStatus","clearNotesList","confirm","map","newTitle","fillHeader","AutoResizer","Shortcut","clipboardUtil","deleteButton","titleEl","dateEl","showSavedIndicatorTimer","editorContentSelected","autoresizedTitle","shortcuts","enableShortcuts","preventDefaultExecution","stopImmediatePropagation","stopPropagation","selectAllShortcut","callback","cmdA","copySelectedShortcut","cmdC","selectEditorContents","editorContent","formattedText","innerText","replace","copy","saver","data","saveIndicator","items","Error","state","blocks","content","dtModify","Date","toLocaleDateString","day","month","hour","minute","hour12","load","JSON","parse","version","editorVersion","ui","addInitialBlock","titleElement","range","createRange","selection","getSelection","selectNodeContents","removeAllRanges","addRange","click","StatusBar","statusText","blinked","swiped","wheelTimeout","detectSwipe","isHorisontal","wheelDeltaY","swipeEnoughLong","wheelDeltaX","deltaX","User","authButton","authResponse","userPanel","backgroundImage","Clipboard","textarea","Object","assign","position","top","opacity","select","execCommand","e","removeChild","re","test"],"mappings":"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","file":"./bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./public/javascripts/app.js\");\n","/*!\n * Library for handling keyboard shortcuts\n * @copyright undefined\n * @license MIT\n * @author CodeX (https://ifmo.su)\n * @version 1.0.0\n */\n!function(e,t){if(\"object\"==typeof exports&&\"object\"==typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)(\"object\"==typeof exports?exports:e)[r]=n[r]}}(\"undefined\"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,\"a\",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p=\"\",t(t.s=0)}([function(e,t,n){\"use strict\";function r(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}Object.defineProperty(t,\"__esModule\",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46},u={CMD:[\"CMD\",\"CONTROL\",\"COMMAND\",\"WINDOWS\",\"CTRL\"],SHIFT:[\"SHIFT\"],ALT:[\"ALT\",\"OPTION\"]},c=function(){function e(t){var n=this;r(this,e),this.commands={},this.keys={},this.parseShortcutName(t.name),this.element=t.on,this.callback=t.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener(\"keydown\",this.executeShortcut,!1)}return o(e,[{key:\"parseShortcutName\",value:function(e){e=e.split(\"+\");for(var t=0;t<e.length;t++)if(e[t]=e[t].toUpperCase(),e[t].length>1)for(var n in u)u[n].includes(e[t])&&(this.commands[n]=!0);else this.keys[e[t]]=!0}},{key:\"execute\",value:function(e){var t=e.ctrlKey||e.metaKey,n=e.shiftKey,r=e.altKey,o={CMD:t,SHIFT:n,ALT:r},u=void 0,c=!0;for(u in this.commands)c=c&&o[u];var a=void 0,s=!0;for(a in this.keys)s=s&&e.keyCode===i[a];c&&s&&this.callback(e)}},{key:\"remove\",value:function(){this.element.removeEventListener(\"keydown\",this.executeShortcut)}}]),e}();t.default=c}])});","'use strict';\n\n\n/**\n * Load libraries\n */\nconst electron = require('electron');\nconst Editor = require('./editor').default;\n\n/**\n * Load components\n */\nconst Aside = require('./aside').default;\nconst Note = require('./note').default;\n\nimport User from './user';\nimport StatusBar from './status-bar';\nimport ConnectionObserver from './connection-observer';\nimport AuthObserver from './auth-observer';\n\n/**\n * Save render proccess to the ipdRender global propery\n */\nwindow.ipcRenderer = electron.ipcRenderer;\n\n/**\n * Disable zoom\n */\nelectron.webFrame.setVisualZoomLevelLimits(1, 1);\n\n/**\n * Load CSS\n */\nrequire('../stylesheets/base.css');\n\n/**\n * Document ready callback\n */\nlet documentReady = () => {\n  /**\n  * Initiate modules\n  * @type {Aside}\n  */\n  codex.notes.editor = new Editor();\n  codex.notes.aside = new Aside();\n  codex.notes.note = new Note();\n  codex.notes.user = new User();\n  codex.notes.statusBar = new StatusBar();\n  codex.notes.connectionObserver = new ConnectionObserver();\n  codex.notes.authObserver = new AuthObserver({\n    onLogin: (user) => {\n      codex.notes.user.fillUserPanel(user);\n      codex.notes.aside.folderSettings.toggleCollaboratorInput();\n    },\n  });\n\n  codex.notes.authObserver.login(codex.notes.user.userData);\n\n  /**\n   * New note saving handler\n   */\n  window.ipcRenderer.on('note saved', (event, response) => {\n    codex.notes.note.addToMenu(response);\n  });\n};\n\nlet openExternalLink = function (event) {\n  if (event.target.tagName !== 'A' || !event.target.href) {\n    return;\n  }\n\n  if (!event.target.closest('.editor')) {\n    electron.shell.openExternal(event.target.href);\n    return;\n  }\n\n  if (event.metaKey || event.ctrlKey) {\n    electron.shell.openExternal(event.target.href);\n  }\n};\n\n/**\n * Application\n */\nmodule.exports = function () {\n  document.addEventListener('DOMContentLoaded', documentReady, false);\n  document.addEventListener('click', openExternalLink);\n\n  /**\n   * Allow access modules with codex.notes[module]\n   */\n  return {};\n}();\n","const SwipeDetector = require('./swipe-detector').default;\n\n/**\n * Aside swiper class\n * @property {object} CSS dictionary\n */\nexport default class AsideSwiper {\n  /**\n   * @constructor\n   * @param {Function} opened  - opening callback\n   * @param {Function} closed  - closing callback\n   */\n  constructor({opened, closed}) {\n    this.CSS = {\n      wrapper : 'aside-swiper',\n      toggled : 'aside-swiper--toggled',\n      left    : 'aside-swiper__left',\n      right   : 'aside-swiper__right'\n    };\n\n    this.wrapper = document.querySelector(`.${this.CSS.wrapper}`);\n    this.left = this.wrapper.querySelector(`.${this.CSS.left}`);\n    this.right = this.wrapper.querySelector(`.${this.CSS.right}`);\n\n    this.opened = opened || function () {};\n    this.closed = closed || function () {};\n\n    /**\n     * Allow to open/close by two-fingers swipe left/right\n     */\n    new SwipeDetector(this.wrapper, (directionRight) => {\n      if (directionRight) {\n        this.open();\n      } else {\n        this.close();\n      }\n    });\n  }\n\n  /**\n   * Swipe left menu, shows folder section\n   */\n  open() {\n    this.wrapper.classList.add(this.CSS.toggled);\n    this.opened();\n  }\n\n  /**\n   * Toggle off folder section\n   */\n  close() {\n    this.wrapper.classList.remove(this.CSS.toggled);\n    this.closed();\n  }\n}\n","import Folder from './folder';\nimport Note from './note';\nimport FolderSettings from './folder-settings';\n\nconst AsideSwiper = require('./aside-swiper').default;\nconst $ = require('./dom').default;\n\n/**\n * Maximum chars at the menu title\n * @type {Number}\n */\nconst menuItemTitleMaxLength = 68;\n\n/**\n * Aside column module\n *\n * @property {object}          this.CSS                     classnames dictionary\n * @property {AsideSwiper}     this.swiper                  AsideSwiper instance\n * @property {Folder}          this.currentFolder           Opened folder instance\n * @property {Folder}          this.previouslyOpenedFolder  See docs in {@link Aside#constructor}\n * @property {Element}         this.newFolderButton         New folder button\n * @property {Element}         this.newFolderField          New folder form field\n * @property {FolderSettings}  this.folderSettings          Folder Settings Panel instance\n */\nexport default class Aside {\n  /**\n   * Make CSS dictionary\n   * @type {Object}\n   */\n  static get CSS() {\n    return {\n      notesMenuLoading: 'notes-list--loading',\n      noteListItem : 'notes-list__content-item',\n      notSeenState : 'notes-list__content-item--not-seen'\n    };\n  }\n  /**\n   * @constructor\n   */\n  constructor() {\n    /**\n     * Find notes list holder\n     * @type {Element}\n     */\n    let notesMenu = document.querySelector('[name=\"js-notes-menu\"]'),\n        foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n\n    /**\n     * Module for hide/show folder sections\n     * @type {AsideSwiper}\n     */\n    this.swiper = new AsideSwiper({\n      opened: () => this.folderOpened(),\n      closed: () => this.folderClosed()\n    });\n\n    /**\n     * Current opened folder.\n     * @type {Folder}\n     */\n    this.currentFolder = null;\n\n    /**\n     * Save previously opened folder id.\n     * Usecase:\n     *   - Folder opened by click in menu (and saved in {@link Aside#currentFolder})\n     *   - Folder closed by swipe-left on Aside (this.currentFolder = null)\n     *   - User makes swipe-right to open Folder back, but we have not its ID\n     *   - So we use previouslyOpenedFolder to construct this.currentFolder again\n     */\n    this.previouslyOpenedFolder = null;\n\n    /**\n     * Show preloader\n     */\n    notesMenu.classList.add(Aside.CSS.notesMenuLoading);\n    foldersMenu.classList.add(Aside.CSS.notesMenuLoading);\n\n    /**\n     * Emit message to load list\n     */\n    this.loadNotes();\n    this.loadFolders();\n\n    /**\n     * Update folder list\n     */\n    window.ipcRenderer.on('update folders list', (event, {userFolders}) => {\n      foldersMenu.classList.remove(Aside.CSS.notesMenuLoading);\n      foldersMenu.innerHTML = '';\n      userFolders.forEach( folder => this.addFolder(folder) );\n    });\n\n    /**\n     * Update notes list\n     */\n    window.ipcRenderer.on('notes list - update', (event, {notes, isRootFolder}) => {\n      notesMenu.classList.remove(Aside.CSS.notesMenuLoading);\n      notes.forEach( note => this.addMenuItem(note, isRootFolder) );\n    });\n\n    /**\n     * Activate new note button\n     */\n    let newNoteButtons = document.querySelectorAll('[name=\"js-new-note-button\"]');\n\n    newNoteButtons.forEach( button => {\n      button.addEventListener('click', () => this.newNoteButtonClicked(button) );\n    });\n\n    /**\n     * Activate new folder button\n     */\n    this.newFolderButton = document.querySelector('[name=\"js-new-folder-button\"]');\n    this.newFolderField = document.querySelector('[name=\"js-new-folder-field\"]');\n\n    let newFolderInput  = this.newFolderField.querySelector('input');\n\n    this.newFolderButton.addEventListener('click',  event => this.newFolderButtonClicked(event) );\n    newFolderInput.addEventListener('keydown', event => this.newFolderInputFilled(event) );\n\n    /**\n     * Activate folders Back button\n     */\n    let folderCloseToggler = $.get('folder-close-zone');\n\n    folderCloseToggler.addEventListener('click', () => {\n      this.closeFolder();\n    });\n\n    this.activateScrollableGradient();\n\n    /**\n     * Active 'Folder Settings' panel\n     */\n    this.folderSettings = new FolderSettings();\n\n    window.ipcRenderer.on('note updated', (event, {note, isRootFolder}) => {\n      if (!note.isRemoved) {\n        this.addMenuItem(note, isRootFolder);\n      } else {\n        this.removeMenuItem(note._id);\n      }\n    });\n\n    window.ipcRenderer.on('folder updated', (event, folder) => {\n      if (!folder.isRemoved) {\n        this.addFolder(folder);\n        /**\n         * Update title of opened folder\n         */\n        if (this.currentFolder && this.currentFolder._id && this.currentFolder._id === folder._id) {\n          this.currentFolder.title = folder.title;\n        }\n      } else {\n        this.removeFolderFromMenu(folder._id);\n      }\n    });\n  }\n\n  /**\n   * Loads notes list from the server\n   *\n   * Can be used async with subscribtion\n   * on window.ipcRenderer.on('notes list - update', (event, {notes, folder}) => {})\n   *\n   * or synchronously like loadNotes().then( notes => {})\n   *\n   * @param  {string|null} folderId\n   * @returns {<Promise>.[]}\n   */\n  loadNotes( folderId = null) {\n    return new Promise(resolve => {\n      let response = window.ipcRenderer.sendSync('notes list - load', folderId);\n      /**\n       * @var {object} response\n       * @var {array}  response.notes\n       * @var {object} response.folder\n       * @var {number} response.folder.id\n       * @var {string} response.folder.title\n       * @var {Boolean} response.isRootFolder\n       */\n\n      resolve(response);\n    }).catch(error => {\n      console.log('Error while loading notes: ', error);\n    });\n  }\n\n  /**\n   * Loads folders list\n   */\n  loadFolders() {\n    window.ipcRenderer.send('folders list - load');\n  }\n\n\n  /**\n   * New note button click handler\n   * @this {Aside}\n   */\n  newNoteButtonClicked() {\n    Note.focusEditor();\n\n    codex.notes.note.clear();\n  }\n\n  /**\n   * New folder button click handler\n   * @param {MouseEvent} event\n   */\n  newFolderButtonClicked(event) {\n    let button = event.target,\n        input = this.newFolderField.querySelector('input');\n\n    button.classList.add('hide');\n    this.newFolderField.classList.remove('hide');\n\n    input.focus();\n  }\n\n  /**\n   * New Folder input keydown handler\n   * @param {KeyboardEvent} event\n   */\n  newFolderInputFilled(event) {\n    if (event.key !== 'Enter') {\n      return;\n    }\n\n    let input = event.target,\n        folderTitle = input.value.trim();\n\n    if (!folderTitle) {\n      return;\n    }\n\n    /**\n     * Save Folder\n     * @type {object}\n     */\n    let createdFolder = window.ipcRenderer.sendSync('folder - create', folderTitle);\n\n    /**\n     * Add saved folder to the menu\n     */\n    this.addFolder(createdFolder);\n\n    input.value = '';\n\n    this.newFolderField.classList.add('hide');\n    this.newFolderButton.classList.remove('hide');\n  }\n\n  /**\n   * Add a Note to the left menu\n   *\n   * @param {object} noteData\n   * @param {number} noteData._id\n   * @param {string} noteData.title\n   * @param {number} noteData.folderId\n   *\n   * @param {Boolean} isRootFolder - true if Note is included to the Root Folder\n   */\n  addMenuItem(noteData, isRootFolder) {\n    if (!noteData.titleLabel) {\n      console.warn('Can not add Note to the Aside because it has no title', noteData);\n      return;\n    }\n\n    let notesMenu;\n\n    if (isRootFolder) {\n      notesMenu = document.querySelector('[name=\"js-notes-menu\"]');\n    } else if (this.currentFolder && noteData.folderId === this.currentFolder._id) {\n      notesMenu = document.querySelector('[name=\"js-folder-notes-menu\"]');\n    } else {\n      console.log('Note added to closed folder: %o', noteData.folderId);\n      return;\n    }\n\n    /**\n     * If we already have this item, update title\n     */\n    let existingNote = notesMenu.querySelector('[data-id=\"' + noteData._id + '\"]');\n\n    if (existingNote) {\n      existingNote.textContent = this.createMenuItemTitle(noteData.titleLabel);\n\n      /**\n       * Set unread badge because Note was updated\n       */\n      this.checkUnreadStatus(noteData._id);\n      return;\n    }\n\n    let item = this.makeMenuItem(noteData.titleLabel, {id: noteData._id});\n\n    notesMenu.insertAdjacentElement('afterbegin', item);\n\n    item.addEventListener('click', event => this.menuItemClicked(event) );\n  }\n\n  /**\n   * Add new item to the folders list\n   *\n   * @param {object} folder\n   * @param {string} folder.title\n   * @param {number} folder._id\n   */\n  addFolder(folder) {\n    if (!folder.title) {\n      console.warn('Can not add Folder to the Aside because it has no title', folder);\n      return;\n    }\n    let foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n    let folderItem = foldersMenu.querySelector('[data-folder-id=\"' + folder._id + '\"]');\n\n    if (folderItem) {\n      this.updateFolderTitleInMenu(folder._id, folder.title);\n      return;\n    }\n\n    let item = this.makeMenuItem(folder.title, {folderId: folder._id});\n\n    foldersMenu.insertAdjacentElement('afterbegin', item);\n\n    item.addEventListener('click', event => this.folderClicked(event.target) );\n  }\n\n  /**\n   * Makes aside menu item\n   * @param  {String} title   - item title\n   * @param  {object} dataset - data to store in dataset\n   * @return {Element}\n   */\n  makeMenuItem(title, dataset) {\n    title = this.createMenuItemTitle(title);\n\n    let item = $.make('li', Aside.CSS.noteListItem, {\n      textContent: title\n    });\n\n    for (let key in dataset) {\n      item.dataset[key] = dataset[key];\n    }\n\n    return item;\n  }\n\n  /**\n   * Creates aside menu item title\n   * @param {String} title\n   * @return {String}\n   */\n  createMenuItemTitle(title) {\n    if ( title.length > menuItemTitleMaxLength ) {\n      title = title.substring(0, menuItemTitleMaxLength) + '…';\n    }\n\n    return title;\n  }\n\n  /**\n   * Remove item from menu\n   *\n   * @param itemId\n   */\n  removeMenuItem(itemId) {\n    let notesMenu = document.querySelectorAll('[name=\"js-notes-menu\"], [name=\"js-folder-notes-menu\"]');\n\n    notesMenu.forEach( menu => {\n      let existingNote = menu.querySelector('[data-id=\"' + itemId + '\"]');\n\n      if (existingNote) existingNote.remove();\n    });\n  }\n\n  /**\n   * Remove folder from menu by ID\n   * @param folderId - folder ID\n   */\n  removeFolderFromMenu(folderId) {\n    let foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n\n    if (!foldersMenu) {\n      return false;\n    }\n\n    let folderItem = foldersMenu.querySelector('[data-folder-id=\"' + folderId + '\"]');\n\n    if (folderItem) {\n      folderItem.remove();\n    }\n  }\n\n  /**\n   * Updates Folder's title in menu\n   *\n   * @param {MongoId} folderId - folder ID\n   * @param {String} title     - new title\n   */\n  updateFolderTitleInMenu(folderId, title) {\n    let foldersMenu = document.querySelector('[name=\"js-folders-menu\"]');\n\n    if (!foldersMenu) {\n      return false;\n    }\n\n    let folderItem = foldersMenu.querySelector('[data-folder-id=\"' + folderId + '\"]');\n\n    if (folderItem) {\n      folderItem.textContent = title;\n    }\n  }\n\n\n  /**\n   * Note in aside menu click listener\n   * @param {MouseEvent} event\n   */\n  menuItemClicked(event) {\n    let menuItem = event.target,\n        id = menuItem.dataset.id;\n\n    // send \"note - get\" event\n    let noteData = window.ipcRenderer.sendSync('note - get', {id});\n\n    codex.notes.note.render(noteData);\n\n    /**\n     * Scroll to top\n     */\n    let editorView = document.querySelector('[name=\"editor-view\"]');\n\n    editorView.scrollIntoView();\n\n    /**\n     * Remove unread badge\n     */\n    this.markNoteAsRead(id);\n  }\n\n  /**\n   * Fired after swipe-right\n   */\n  folderOpened() {\n    /**\n     * Restore current folder after closing\n     */\n    if (!this.currentFolder && this.previouslyOpenedFolder) {\n      this.currentFolder = new Folder(this.previouslyOpenedFolder);\n    }\n\n    console.assert(this.currentFolder, 'Folder opened but does not initialized');\n\n    codex.notes.note.clear();\n  }\n\n  /**\n   * Fired after swipe-left\n   */\n  folderClosed() {\n    if (this.currentFolder) {\n      this.previouslyOpenedFolder = this.currentFolder.id;\n    }\n\n    this.currentFolder = null;\n    this.folderSettings.close();\n  }\n\n  /**\n   * Folder menu item clicked handler\n   * @param {Element} item - clicked folder button\n   */\n  folderClicked( item ) {\n    let folderId = item.dataset.folderId;\n\n    /**\n     * Load folder\n     */\n    this.currentFolder = new Folder(folderId, item.textContent);\n\n    /**\n     * Open folder section\n     */\n    this.swiper.open();\n  }\n\n  /**\n   * Closes opened folder\n   */\n  closeFolder() {\n    this.swiper.close();\n  }\n\n  /**\n   * Shows fade-out gradient at the top of scrollable zone\n   * Uses by scroll to prevent overlaying first block (NOTES, FOLDERS headings) with gradient when block is not scrolled\n   */\n  activateScrollableGradient() {\n    /**\n     * Scroll top offset to show gradient\n     * @type {Number}\n     */\n    const minimumDistance = 5;\n\n    /**\n     * Modificatior that will be added to the wrapper on scroll\n     * @type {String}\n     */\n    const scrolledModificator = 'aside__scrollable--scrolled';\n\n    /**\n     * Scrollable zoners\n     * @type {Element[]}\n     */\n    let scrollableZones = document.querySelectorAll('[name=\"js-scrollable\"]');\n\n    let addClassOnScroll = event => {\n      let scrollableContent = event.target,\n          scrollableWrapper = event.target.parentNode;\n\n      if (scrollableContent.scrollTop > minimumDistance) {\n        scrollableWrapper.classList.add(scrolledModificator);\n      } else {\n        scrollableWrapper.classList.remove(scrolledModificator);\n      }\n    };\n\n    scrollableZones.forEach( zone => {\n      zone.addEventListener('scroll', addClassOnScroll);\n    });\n  }\n\n  /**\n   * Check unread status of passed Notes Ids\n   * @param {String[]|String} noteIds - ids of Notes to check\n   */\n  checkUnreadStatus(noteIds) {\n    if (!Array.isArray(noteIds)) {\n      /**\n       * If only singe id passed\n       */\n      if (noteIds) {\n        noteIds = [ noteIds ];\n      } else {\n        return;\n      }\n    }\n\n    /**\n     * Request unrad states of passed note ids\n     */\n    window.ipcRenderer.send('notes - get unread states', { noteIds });\n\n    /**\n     * We use \"once\" to invoke sa callback to automatically removes listener after folder will be closed\n     */\n    window.ipcRenderer.once('notes - set unread state',\n\n      /**\n       * Check unread state of Notes from the current Folder\n       * @param  {*} event\n       * @param  {Object} unreadStates - map of note ids with unread states {dqO9tu5vY2aSC582: true, ...}\n       */\n      (event, unreadStates = {}) => {\n        for (let noteId in unreadStates) {\n          let noteUnread = unreadStates[noteId];\n\n          if (noteUnread) {\n            this.markNoteAsUnread(noteId);\n          }\n        }\n      });\n  }\n\n  /**\n   * Remove unread badge from the Note in Aside\n   * @param  {string} noteId - Note's id\n   */\n  markNoteAsRead(noteId) {\n    let noteInAside = document.querySelector(`[name=\"js-notes-menu\"] [data-id=\"${noteId}\"], [name=\"js-folder-notes-menu\"] [data-id=\"${noteId}\"]`);\n\n    if (noteInAside) {\n      noteInAside.classList.remove(Aside.CSS.notSeenState);\n    }\n  }\n\n  /**\n   * Mark Note at the Aside as unread\n   * @param {string} noteId\n   */\n  markNoteAsUnread(noteId) {\n    let noteInAside = document.querySelector(`[name=\"js-notes-menu\"] [data-id=\"${noteId}\"], [name=\"js-folder-notes-menu\"] [data-id=\"${noteId}\"]`);\n\n    if (noteInAside) {\n      noteInAside.classList.add(Aside.CSS.notSeenState);\n    }\n  }\n}\n","/**\n * @class AuthObserver\n * @classdesc Store user's auth state\n *\n * Class uses to observe user`s auth state\n *\n * @usage\n * const authObserver = new AuthObserver();\n * authObserver.login(userData);\n *\n * authObserver.loggedIn === true\n */\nexport default class AuthObserver {\n  /**\n   * @constructor\n   *\n   * @param onLogin - callback to fire when user is logged in\n   * @param onLogout - callback to fire when user is logged out\n   */\n  constructor({onLogin = function () {}, onLogout = function () {}, user = null}) {\n    this.user = user;\n    this._loggedIn = false;\n    this.onLogin = onLogin;\n    this.onLogout = onLogout;\n\n    if (this.user) {\n      this.login(this.user);\n    }\n  }\n\n  /**\n   * Store logged in user state.\n   * Fires onLogin callback\n   *\n   * @param {Object} user - logged user\n   */\n  login(user) {\n    if (!user.token) return;\n\n    this.user = user;\n    this._loggedIn = true;\n    this.onLogin(user);\n  }\n\n  /**\n   * Store logged out user state.\n   * Fires onLogout callback\n   */\n  logout() {\n    this._loggedIn = false;\n    this.onLogout(this.user);\n    this.user = null;\n  }\n\n  /**\n   * Get current login state\n   *\n   * @returns {boolean}\n   */\n  get loggedIn() {\n    return this._loggedIn;\n  }\n}\n","/**\n * Autoresizer module\n * Expands dynamically height of textareas\n */\n\n/**\n * @property elements - array of elements\n * @property {Function} addResizer - adds listeners\n * @property {Function} removeResizer - removes listeners\n * @property {Function} destroy - removes all elements and handlers\n */\nexport default class Autoresizer {\n  /**\n   * adds autoresize handler\n   * @param elements - elements that needs to expand\n   */\n  constructor(elements) {\n    this.elements = elements || [];\n\n    for(let i = 0; i < this.elements.length; i++) {\n      this.addResizer(this.elements[i]);\n    }\n  }\n\n  /**\n   * autoresizer for textareas\n   * @param {Element} el - element we want to expand\n   */\n  addResizer(el) {\n    if (el.value.trim()) {\n      el.style.height = el.scrollHeight + 'px';\n    } else {\n      el.style.height = 'auto';\n    }\n\n    el.addEventListener('keydown', this.enterKeyPressed, false);\n    el.addEventListener('input', this.resize.bind(this, el), false);\n  }\n\n  /**\n   * Prevent enter key pressing\n   * @param event\n   */\n  enterKeyPressed(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n    }\n  }\n\n  /**\n   * Resize input\n   * @param el\n   */\n  resize(el) {\n    el.style.height = 'auto';\n    el.style.height = el.scrollHeight + 'px';\n  }\n\n  /**\n   * removes handlers from element\n   * @param {Element} el - element we want to clear from resizer\n   */\n  removeResizer(el) {\n    el.removeEventListener('keydown', this.enterKeyPressed);\n    el.removeEventListener('input', this.resize);\n  }\n\n  /**\n   * Destroyer function. Clears all elements\n   */\n  destroy() {\n    for(let i = 0; i < this.elements.length; i++) {\n      this.removeResizer(this.elements[i]);\n      this.elements[i].style.height = 'auto';\n    }\n\n    this.elements = [];\n  }\n}\n","/**\n * @module ConnectionObserver\n *\n * Detects Online and Offline statuses and update state in the Aside\n *\n * @typedef {ConnectionObserver} ConnectionObserver\n */\nexport default class ConnectionObserver {\n  /**\n   * @constructor\n   */\n  constructor() {\n    if (window.navigator.onLine) {\n      this.online();\n    } else {\n      this.offline();\n    }\n\n    window.addEventListener('online',  () => {\n      this.online();\n    });\n    window.addEventListener('offline', () => {\n      this.offline();\n    });\n  }\n\n  /**\n   * Fired when the Application goes Online\n   */\n  online() {\n    codex.notes.statusBar.text = 'Syncing';\n    codex.notes.statusBar.loading = true;\n\n    this.sync().then(() => {\n      codex.notes.statusBar.text = 'All saved';\n      codex.notes.statusBar.loading = false;\n    });\n  }\n\n  /**\n   * Send sync event\n   * @return {Promise<Object>} - updates from the Cloud\n   */\n  sync() {\n    return new Promise((resolve) => {\n      console.time('Syncing...');\n      window.ipcRenderer.send('user - sync');\n      window.ipcRenderer.once('sync finished', (event, returnedData) => {\n        console.timeEnd('Syncing...');\n        resolve(returnedData);\n      });\n    });\n  }\n\n  /**\n   * Fired when the Application goes Offline\n   */\n  offline() {\n    codex.notes.statusBar.text = 'Offline';\n\n    this.reconnect();\n  }\n\n  /**\n   * Start reconnection process\n   */\n  reconnect() {\n    codex.notes.statusBar.text = 'Reconnection';\n    codex.notes.statusBar.loading = true;\n  }\n}","const remote = require('electron').remote;\n\n/**\n *\n */\nexport default class Dialog {\n  /**\n   *\n   */\n  constructor() {};\n\n  /**\n   *\n   * @returns {boolean}\n   */\n  static confirm(text) {\n    const browserWindow = remote.getCurrentWindow();\n\n    browserWindow.setSheetOffset(30, browserWindow.width / 2);\n\n    let choice = remote.dialog.showMessageBox(browserWindow,\n      {\n        type: 'question',\n        buttons: ['Yes', 'No'],\n        title: 'Confirm',\n        message: text\n      });\n\n    if (choice === 0) {\n      return true;\n    }    else {\n      return false;\n    }\n  }\n\n  /**\n   * Shows error notification\n   *\n   * @returns {boolean}\n   */\n  static error(text) {\n    const browserWindow = remote.getCurrentWindow();\n\n    browserWindow.setSheetOffset(30, browserWindow.width / 2);\n\n    remote.dialog.showMessageBox(browserWindow, {\n      type: 'error',\n      title: 'Wow. Something goes wrong.',\n      message: text\n    });\n  }\n}","/**\n * DOM manipulations methods\n */\nexport default class DOM {\n  /**\n   * Helper for making Elements with classname and attributes\n   * @param  {string} tagName           - new Element tag name\n   * @param  {array|string} classNames  - list or name of CSS classname(s)\n   * @param  {Object} attributes        - any attributes\n   * @return {Element}\n   */\n  static make(tagName, classNames, attributes) {\n    var el = document.createElement(tagName);\n\n    if ( Array.isArray(classNames) ) {\n      el.classList.add(...classNames);\n    } else if( classNames ) {\n      el.classList.add(classNames);\n    }\n\n    for (let attrName in attributes) {\n      el[attrName] = attributes[attrName];\n    }\n\n    return el;\n  }\n\n  /**\n   * Append one or several elements to the parent\n   *\n   * @param  {Element} parent    - where to append\n   * @param  {Element|Element[]} - element ore elements list\n   */\n  static append(parent, elements) {\n    if ( Array.isArray(elements) ) {\n      elements.forEach( el => parent.appendChild(el) );\n    } else {\n      parent.appendChild(elements);\n    }\n  }\n\n  /**\n\n  /**\n  * Replaces node with\n  * @param {Element} nodeToReplace\n  * @param {Element} replaceWith\n  */\n  static replace(nodeToReplace, replaceWith) {\n    return nodeToReplace.parentNode.replaceChild(replaceWith, nodeToReplace);\n  }\n\n  /**\n  * getElementById alias\n  * @param {String} elementId\n  */\n  static get(elementId) {\n    return document.getElementById(elementId);\n  }\n\n  /**\n  * Loads static resourse: CSS or JS\n  * @param {string} type  - CSS|JS\n  * @param {string} path  - resource path\n  * @param {string} inctanceName - unique name of resource\n  * @return Promise\n  */\n  static loadResource(type, path, instanceName) {\n    /**\n     * Imported resource ID prefix\n     * @type {String}\n     */\n    const resourcePrefix = 'cdx-resourse';\n\n    return new Promise(function (resolve, reject) {\n      if (!type || !['JS', 'CSS'].includes(type)) {\n        reject(`Unexpected resource type passed. «CSS» or «JS» expected, «${type}» passed`);\n      }\n\n      let node;\n\n      /** Script is already loaded */\n      if ( !instanceName ) {\n        reject('Instance name is missed');\n      } else if ( document.getElementById(`${resourcePrefix}-${type.toLowerCase()}-${instanceName}`) ) {\n        resolve(path);\n      }\n\n      if (type === 'JS') {\n        node = document.createElement('script');\n        node.async = true;\n        node.defer = true;\n        node.charset = 'utf-8';\n      } else {\n        node = document.createElement('link');\n        node.rel = 'stylesheet';\n      }\n\n      node.id = `${resourcePrefix}-${type.toLowerCase()}-${instanceName}`;\n\n      let timerLabel = `Resource loading ${type} ${instanceName}`;\n\n      console.time(timerLabel);\n\n      node.onload = function () {\n        console.timeEnd(timerLabel);\n        resolve(path);\n      };\n\n      node.onerror = function () {\n        console.timeEnd(timerLabel);\n        reject(path);\n      };\n\n      if (type === 'JS') {\n        node.src = path;\n      } else {\n        node.href = path;\n      }\n\n      document.head.appendChild(node);\n    });\n  }\n\n  /**\n   * Inserts one element after another\n   * @param  {Element} newNode\n   * @param  {Element} referenceNode\n   */\n  static after(newNode, referenceNode) {\n    referenceNode.insertAdjacentElement('afterEnd', newNode);\n  }\n}\n","let $ = require('./dom').default;\n\n/**\n * CodeX Editor module\n */\nexport default class Editor {\n  /**\n  * @constructor\n  * @property {String}  path          - CodeX Editor library path\n  * @property {Array}   plugins       - plugins names\n  * @property {TimerId} autosaveTimer - autosave debounce timer\n  */\n  constructor() {\n    this.path = '../../public/codex.editor/';\n    this.plugins = ['paragraph', 'header'];\n\n    this.autosaveTimer = null;\n\n    this.loadEditor()\n      .then(() => this.loadPlugins())\n      .then(() => this.init());\n  }\n\n  /**\n   * Loads CodeX Editor sources\n   * @return {Promise}\n   */\n  loadEditor() {\n    return Promise.all([\n      $.loadResource('JS', this.path + 'codex-editor.js', 'codex-editor'),\n      $.loadResource('CSS', this.path + 'codex-editor.css', 'codex-editor')\n    ]).catch( err => console.warn('Cannot load Codex Editor sources: ', err))\n      .then( () => console.log('CodeX Editor loaded') );\n  }\n\n  /**\n   * Loads CodeX Editor plugins\n   * @return {Promise}\n   */\n  loadPlugins() {\n    let pluginsQuery = [];\n\n    this.plugins.forEach( name => {\n      pluginsQuery.push(...[\n        $.loadResource('JS', this.path + 'plugins/' + name + '/' + name + '.js', name),\n        $.loadResource('CSS', this.path + 'plugins/' + name + '/' + name + '.css', name)\n      ]);\n    });\n\n    return Promise.all(pluginsQuery)\n      .catch( err => console.warn('Cannot load plugin: ', err))\n      .then( () => console.log('Plugins loaded') );\n  }\n\n  /**\n   * Init CodeX Editor\n   * @return {[type]} [description]\n   */\n  init() {\n    let config = {\n      holderId : 'codex-editor',\n      initialBlockPlugin : 'paragraph',\n      hideToolbar: false,\n      placeholder: 'Your story',\n      tools : {}\n    };\n\n    this.plugins.forEach( name => {\n      if (!window[name]) {\n        console.warn('Plugin ' + name + ' does not ready');\n        return;\n      }\n\n      config.tools[name] = {\n        type: name,\n        iconClassname: 'ce-icon-' + name,\n        render: window[name].render,\n        validate: window[name].validate,\n        save: window[name].save,\n        destroy: window[name].destroy,\n        makeSettings: window[name].makeSettings,\n      };\n    });\n\n    if (config.tools.paragraph) {\n      config.tools.paragraph.allowedToPaste = true;\n      config.tools.paragraph.showInlineToolbar = true;\n      config.tools.paragraph.allowRenderOnPaste = true;\n    }\n\n    if (config.tools.header) {\n      config.tools.header.displayInToolbox = true;\n    }\n\n    codex.editor.start(config);\n\n    window.setTimeout(() => {\n      this.enableAutosave();\n    }, 500);\n  }\n\n  /**\n   * Keyup event on editor zone fires timeout to autosave note\n   */\n  autosave() {\n    if (this.autosaveTimer) window.clearTimeout(this.autosaveTimer);\n\n    this.autosaveTimer = window.setTimeout( () => {\n      codex.notes.note.save();\n    }, 500);\n  }\n\n  /**\n   * Add keyup listener to editor zone\n   */\n  enableAutosave() {\n    let noteTitle = document.getElementById('note-title');\n\n    noteTitle.addEventListener('keyup', this.autosave.bind(this));\n    codex.editor.nodes.redactor.addEventListener('keyup', this.autosave.bind(this));\n  }\n\n  /**\n   * Remove keyup listener to editor zone\n   */\n  disableAutosave() {\n    codex.editor.nodes.redactor.removeEventListener('keyup', this.autosave.bind(this));\n  }\n}\n","const Dialog = require('./dialog').default;\nconst $ = require('./dom').default;\nconst Validate = require('./utils/validate').default;\n\n/**\n * Folder Settings panel module\n *\n * @property {Boolean} opened - state\n */\nexport default class FolderSettings {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.toggler = $.get('js-folder-settings-toggler');\n    this.closeButton = $.get('js-close-folder');\n    this.removeFolderButton = $.get('js-delete-folder');\n    this.folderTitleInput = document.getElementsByName('folder-title')[0];\n    this.newMemberInput = $.get('folder-new-member-input');\n    this.loginButton = $.get('folder-login-button');\n    this.membersList = $.get('js-members-list');\n\n    this.toggler.addEventListener('click', () => {\n      this.toggle();\n    });\n\n    this.closeButton.addEventListener('click', () => {\n      this.close();\n    });\n\n    this.removeFolderButton.addEventListener('click', () => {\n      this.removeFolderClicked();\n    });\n\n    this.folderTitleInput.addEventListener('keydown', event => this.changeTitleKeydown(event) );\n    this.newMemberInput.addEventListener('keydown', event => this.inviteMemberKeydown(event) );\n    this.loginButton.addEventListener('click', () => {\n      codex.notes.user.showAuth();\n    });\n\n    window.ipcRenderer.on('folder - add collaborator', (event, collaborator) => {\n      if (codex.notes.aside.currentFolder.id === collaborator.folderId) {\n        this.addCollaborator(collaborator);\n      }\n    });\n  }\n\n  /**\n   * CSS dictionary\n   */\n  static get CSS() {\n    return {\n      panelOpenedModifier: 'folder-settings-opened',\n      wobble: 'wobble'\n    };\n  }\n\n  /**\n   * Open panel and change state\n   */\n  open() {\n    document.body.classList.add(FolderSettings.CSS.panelOpenedModifier);\n    this.opened = true;\n\n\n    /**\n     * Fill Folder's title input\n     */\n    this.folderTitleInput.value = codex.notes.aside.currentFolder.title || '';\n  }\n\n  /**\n   * Close panel and change state\n   */\n  close() {\n    document.body.classList.remove(FolderSettings.CSS.panelOpenedModifier);\n    this.opened = false;\n  }\n\n  /**\n   * Shows/hide this.panel\n   */\n  toggle() {\n    if (this.opened) {\n      this.close();\n    } else {\n      this.open();\n    }\n  }\n\n  /**\n   * Handler for Remove Folder Button\n   */\n  removeFolderClicked() {\n    console.assert(codex.notes.aside.currentFolder, 'Cannot remove Folder because it is not open');\n\n    let result = codex.notes.aside.currentFolder.delete();\n\n    if (result) {\n      this.close();\n      codex.notes.aside.closeFolder();\n    }\n  }\n\n  /**\n   * Handler for Change Title input\n   * @param  {KeyboardEvent} event - keydowns\n   */\n  changeTitleKeydown(event) {\n    if (event.key !== 'Enter') {\n      return;\n    }\n\n    let input = event.target,\n        title = input.value.trim(),\n        id = codex.notes.aside.currentFolder._id;\n\n    if (!title) {\n      return;\n    }\n\n    /**\n     * Send request for renaming\n     * @type {object}\n     */\n    let result = window.ipcRenderer.sendSync('folder - change title', { id, title });\n\n    if (!result) {\n      Dialog.error('Folder renaming failed. Please, try again.');\n      return false;\n    }\n\n    /**\n     * Update title in the:\n     *  - folder header\n     *  - aside menu\n     */\n    codex.notes.aside.currentFolder.title = title;\n\n    /**\n     * Close folder settings\n     */\n    this.close();\n  }\n\n  /**\n   * Handler for New Member input\n   * @param {KeyboardEvent} event - keydowns\n   */\n  inviteMemberKeydown(event) {\n    if (event.key !== 'Enter') {\n      return;\n    }\n\n    let input = event.target,\n        fieldset = input.parentNode,\n        email = input.value.trim(),\n        id = codex.notes.aside.currentFolder._id;\n\n    if (!email || !Validate.email(email)) {\n      fieldset.classList.add(FolderSettings.CSS.wobble);\n      window.setTimeout(() => {\n        fieldset.classList.remove(FolderSettings.CSS.wobble);\n      }, 100);\n\n      return;\n    }\n\n    /**\n     * Send request for adding new collaborator\n     * @type {object}\n     */\n    let result = window.ipcRenderer.sendSync('folder - collaborator add', { id, email });\n\n    // Clear input field\n    input.value = '';\n\n    if (!result.success) {\n      Dialog.error(result.message || 'Error while adding a collaborator to the folder');\n      return false;\n    }\n\n    // this.addCollaborator({email});\n  }\n\n  /**\n   * Add Collaborators to folder-settings panel\n   *\n   * @param {Array} collaborators\n   */\n  showCollaborators(collaborators) {\n    this.membersList.innerHTML = '';\n\n    collaborators.forEach(collaborator => {\n      this.addCollaborator(collaborator);\n    });\n  }\n\n  /**\n   * Add Collaborator to the Collaborators list at folder-settings panel\n   *\n   * @param {String|null} collaborator.user.photo\n   * @param {String} collaborator.email\n   */\n  addCollaborator(collaborator) {\n    let newMemberItem = $.make('LI', [ 'member-list__item' ], {}),\n        ava,\n        memberEmailClasses = [ 'member-list__item-name' ];\n\n    if (collaborator.user && collaborator.user.photo) {\n      /** Add User's photo */\n      ava = $.make('IMG', ['member-list__item-photo', 'member-list__item-photo--circled'], {\n        src: collaborator.user.photo\n      });\n    } else {\n      /** Add envelope icon */\n      ava = $.make('IMG', [ 'member-list__item-photo' ], {\n        src: '../../public/svg/envelope.svg'\n      });\n\n      memberEmailClasses.push('member-list__item--waiting');\n    }\n\n    /** Add ava block */\n    $.append(newMemberItem, ava);\n\n    let emailWrapper = $.make('div', 'member-list__item-name-wrapper');\n\n    /** Create block with User's email */\n    let newMemberEmail = $.make('SPAN', memberEmailClasses, {\n      innerHTML: collaborator.email\n    });\n\n    /**\n     * If email is longer that this count, it will be overflowed\n     * @type {number}\n     */\n    const visibleCharsCount = 23;\n\n    /**\n     * Add class for elements with long email for the overflow animation\n     */\n    if (collaborator.email.length > visibleCharsCount) {\n      emailWrapper.classList.add('member-list__item-name-wrapper--scrollable');\n    }\n\n    $.append(emailWrapper, newMemberEmail);\n    $.append(newMemberItem, emailWrapper);\n\n    /**\n     * Add new row\n     */\n    $.append(this.membersList, newMemberItem);\n  }\n\n  /**\n   * Toggle visibility of login button and new collaborator input\n   */\n  toggleCollaboratorInput() {\n    if (codex.notes.authObserver.loggedIn) {\n      this.loginButton.classList.add('hide');\n      this.newMemberInput.classList.remove('hide');\n      return;\n    }\n\n    this.loginButton.classList.remove('hide');\n    this.newMemberInput.classList.add('hide');\n  }\n}\n","const $ = require('./dom').default;\nconst Dialog = require('./dialog').default;\n\n/**\n * Folders methods\n *\n * @typedef {Folder} Folder\n * @property {Number}    id                 - Folder's id\n * @property {string}    title              - Folder's title\n * @property {Array}     notes              - Notes list\n * @property {Array}     collaborators      - Collaborators list\n * @property {Element}   notesListWrapper   - Notes list holder\n */\nexport default class Folder {\n  /**\n   * Folder methods\n   *\n   * @param {Number} id     - Folder's id\n   * @param {string} title  - Folder's title\n   */\n  constructor(id, title) {\n    this._id = id;\n    this._title = title;\n\n    this.folderTitleElement = $.get('js-folder-title');\n\n    /**\n     * Load actual Folder's data\n     * @type {Object}\n     */\n    let folderData = window.ipcRenderer.sendSync('folder - get', this._id);\n\n    this.title = folderData.title;\n\n    window.ipcRenderer.send('folder - get collaborators', {folder: this.id});\n    window.ipcRenderer.once('folder - collaborators list', (event, {collaborators}) => {\n      this.collaborators = collaborators;\n      codex.notes.aside.folderSettings.showCollaborators(this.collaborators);\n    });\n\n    this.notesListWrapper = document.querySelector('[name=\"js-folder-notes-menu\"]');\n\n    /**\n     * @todo asynchronous notes load\n     */\n    codex.notes.aside.loadNotes(id)\n      .then( ({notes}) => {\n        this.notes = notes;\n        this.setNoteSeenStatus();\n      })\n      .then( () => this.clearNotesList() );\n  }\n\n  /**\n   * Folder id getter\n   */\n  get id() {\n    return this._id;\n  }\n\n  /**\n   * Folder title getter\n   */\n  get title() {\n    return this._title;\n  }\n\n  /**\n   * Folder title setter\n   * @param {String} newTitle\n   */\n  set title(newTitle) {\n    this._title = newTitle;\n\n    /**\n     * Update in the Header\n     */\n    this.fillHeader();\n\n    /**\n     * Update in the Aside menu\n     */\n    codex.notes.aside.updateFolderTitleInMenu(this._id, this._title);\n  }\n\n  /**\n   * Fills folder header block\n   */\n  fillHeader() {\n    this.folderTitleElement.textContent = this._title;\n  }\n\n  /**\n   * Clear list if there is no one note\n   */\n  clearNotesList() {\n    this.notesListWrapper.innerHTML = '';\n  }\n\n  /**\n   * Delete folder\n   */\n  delete() {\n    if (Dialog.confirm('Are you sure you want to delete this folder?')) {\n      if (window.ipcRenderer.sendSync('folder - delete', this._id)) {\n        codex.notes.aside.removeFolderFromMenu(this._id);\n        codex.notes.note.clear();\n        return true;\n      }\n    }\n    Dialog.error('Folder removing failed');\n    return false;\n  }\n\n  /**\n   * Checks note last seen time.\n   * if note modification time is greater, then add badge\n   */\n  setNoteSeenStatus() {\n    let noteIds = this.notes.map(note => note._id);\n\n    /**\n     * Check unread status of Notes in the Folder\n     */\n    codex.notes.aside.checkUnreadStatus(noteIds);\n  }\n}\n","const $ = require('./dom').default;\nconst AutoResizer = require('./autoresizer').default;\nconst Dialog = require('./dialog').default;\nconst Shortcut = require('@codexteam/shortcuts').default;\nconst clipboardUtil = require('./utils/clipboard').default;\n\n/**\n * @typedef {Object} NoteData\n * @property {String} _id           — Note's id\n * @property {String} title         — Note's title\n * @property {String} authorId      — Note's Author id\n * @property {String} folderId      - Note's Folder id\n * @property {String} content       - JSON with Note's body\n * @property {Number} dtModify      - timestamp of last modification\n * @property {Number} dtCreate      - timestamp of Note creation\n * @property {Boolean} isRemoved    - Note's removed state\n * @property {String|null} editorVersion - used CodeX Editor version\n */\n\n/**\n * Note section module\n *\n * @typedef {Note} Note\n * @property {Element} deleteButton\n * @property {Element} titleEl\n * @property {Element} dateEl\n * @property {Timer} showSavedIndicatorTimer\n * @property {boolean} editorContentSelected - is all document selected by CMD+A\n * @property {ShortCut[]} shortcut\n */\nexport default class Note {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.deleteButton = $.get('delete-button');\n\n    this.titleEl = document.getElementById('note-title');\n    this.dateEl  = document.getElementById('note-date');\n    this.editor  = document.getElementById('codex-editor');\n\n    this.showSavedIndicatorTimer = null;\n\n    /**\n     * True after user selects all document by CMD+A\n     * @type {boolean}\n     */\n    this.editorContentSelected = false;\n\n    // when we are creating new note\n    if (!this.autoresizedTitle) {\n      this.autoresizedTitle = new AutoResizer([ this.titleEl ]);\n    }\n\n    this.shortcuts = [];\n\n    this.enableShortcuts();\n  }\n\n  /**\n   * CMD+A - select all document\n   * CDM+C - copy selected content (title + editor area)\n   */\n  enableShortcuts() {\n    let preventDefaultExecution = (event) => {\n      event.preventDefault();\n      event.stopImmediatePropagation();\n      event.stopPropagation();\n    };\n\n    // any click on body prevents content selection\n    // stop preventing copy event\n    document.body.addEventListener('click', () => {\n      this.editorContentSelected = false;\n      this.editor.removeEventListener('copy', preventDefaultExecution);\n    }, false);\n\n    /**\n     * Select all document by CMD+A\n     */\n    let selectAllShortcut = new Shortcut({\n      name: 'CMD+A',\n      on: this.editor,\n      callback: event => {\n        this.cmdA(event);\n        this.editor.addEventListener('copy', preventDefaultExecution);\n      }\n    });\n\n    /**\n     * Copy selected document by CMD+C\n     */\n    let copySelectedShortcut = new Shortcut({\n      name: 'CMD+C',\n      on: this.editor,\n      callback: () => {\n        this.cmdC();\n      }\n    });\n\n    this.shortcuts.push(selectAllShortcut);\n    this.shortcuts.push(copySelectedShortcut);\n  }\n\n  /**\n   * CMD+A Shortcut\n   * Selects title + all Note\n   */\n  cmdA(event) {\n    event.preventDefault();\n    event.stopImmediatePropagation();\n\n    this.selectEditorContents();\n  }\n\n  /**\n   * CMD+C Shortcut\n   * Copies selected title and Note\n   */\n  cmdC() {\n    if (!this.editorContentSelected) { // selection was cleared\n      return;\n    }\n\n    let editorContent = this.editor.querySelector('.ce-redactor'),\n        formattedText = editorContent.innerText.replace(/\\n/g, '\\n\\n');\n\n    clipboardUtil.copy(this.titleEl.value + '\\n\\n' + formattedText);\n\n    // select content again because we select textarea contents to copy to the clipboard\n    this.selectEditorContents();\n  }\n\n  /**\n   * Send note data to backend\n   * @static\n   */\n  save() {\n    this.deleteButton.classList.remove('hide');\n\n    /**\n     * If folder is opened, pass id. Otherwise pass false\n     */\n    let folderId = codex.notes.aside.currentFolder ? codex.notes.aside.currentFolder.id : null;\n\n    codex.editor.saver.save()\n      .then(noteData => {\n        this.validate(noteData);\n        return noteData;\n      })\n      .then( noteData => {\n        let note = {\n          data: noteData,\n          title: this.titleEl.value.trim(),\n          folderId\n        };\n\n        let saveIndicator = document.getElementById('save-indicator');\n\n        if (this.showSavedIndicatorTimer) {\n          window.clearTimeout(this.showSavedIndicatorTimer);\n        }\n\n        saveIndicator.classList.add('saved');\n\n        this.showSavedIndicatorTimer = window.setTimeout( () => {\n          saveIndicator.classList.remove('saved');\n        }, 500);\n\n        window.ipcRenderer.send('note - save', {note});\n      })\n      .catch( err => {\n        console.log('Error while saving note: ', err);\n      } );\n  }\n\n  /**\n   * Validate Note data before saving\n   * @param {object} noteData\n   * @throws {Error}\n   */\n  validate(noteData) {\n    if (!noteData.items.length) {\n      throw Error('Article is empty');\n    }\n  }\n\n  /**\n   * Add Note to the menu by Aside.addMenuItem method\n   *\n   * @param {object} data\n   * @param {object} data.note\n   * @param {number} data.note.folderId\n   * @param {number} data.note._id\n   * @param {string} data.note.title\n   * @param {Boolean} data.isRootFolder - true if Note included in the Root Folder\n   */\n  addToMenu({note, isRootFolder}) {\n    codex.editor.state.blocks.id = note._id;\n    codex.notes.aside.addMenuItem(note, isRootFolder);\n  }\n\n  /**\n   * Render the Note\n   * @param {NoteData} note\n   */\n  render(note) {\n    codex.editor.content.clear(true);\n    this.titleEl.value = note.title;\n\n    /**\n     * We store all times in a Seconds to correspond server-format\n     * @type {Date}\n     */\n    let dtModify = new Date(note.dtModify * 1000);\n\n    this.dateEl.textContent = dtModify.toLocaleDateString('en-US', {\n      day: 'numeric',\n      month: 'short',\n      hour: 'numeric',\n      minute: 'numeric',\n      hour12: false\n    });\n    codex.editor.content.load({\n      id: note._id,\n      items: JSON.parse(note.content),\n      time: note.dtModify,\n      version: note.editorVersion,\n    });\n    this.deleteButton.classList.remove('hide');\n\n    /**\n     * if we are trying to render new note but we have an Autoresizer instance\n     * then we need to clear it before we create new one\n     */\n    if (this.autoresizedTitle) {\n      this.autoresizedTitle.destroy();\n    }\n\n    this.autoresizedTitle = new AutoResizer([ this.titleEl ]);\n  }\n\n  /**\n   * Clears editor\n   */\n  clear() {\n    codex.editor.content.clear(true);\n    this.titleEl.value = '';\n    this.dateEl.textContent = '';\n    codex.editor.ui.addInitialBlock();\n    this.deleteButton.classList.add('hide');\n\n    // destroy autoresizer\n    this.autoresizedTitle.destroy();\n\n    this.editorContentSelected = false;\n  }\n\n  /**\n   * Set focus to the Editor\n   */\n  static focusEditor() {\n    window.setTimeout(function () {\n      let editor = document.querySelector('.ce-redactor');\n\n      editor.click();\n    }, 10);\n  }\n\n  /**\n   * Delete article\n   */\n  delete() {\n    let id = codex.editor.state.blocks.id;\n\n    if (!id) {\n      return;\n    }\n\n    if (Dialog.confirm('Are you sure you want to delete this note?')) {\n      if (!window.ipcRenderer.sendSync('note - delete', {id})) {\n        return false;\n      }\n\n      codex.notes.aside.removeMenuItem(id);\n      this.clear();\n    }\n  }\n\n  /**\n   * Title input keydowns\n   * @description  By ENTER, sets focus on editor\n   * @param  {Element} titleElement - title block\n   * @param  {Event} event - keydown event\n   */\n  titleKeydownHandler(titleElement, event) {\n    if (event.keyCode == 13) {\n      event.preventDefault();\n\n      Note.focusEditor();\n    }\n  }\n\n  /**\n   * selects editor with title\n   */\n  selectEditorContents() {\n    let range = document.createRange(),\n        selection = window.getSelection();\n\n    range.selectNodeContents(this.editor);\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    this.editorContentSelected = true;\n  }\n}\n","import $ from './dom';\n\n/**\n * @module StatusBar\n * @description Module for working with Aside Status Bar\n *\n * @typedef {StatusBar} StatusBar\n * @property {Element} statusBar - Status Bar Element\n */\nexport default class StatusBar {\n  /**\n   * @constructor\n   * Find status bar Element, init all stuff\n   */\n  constructor() {\n    this.statusBar = $.get('status-bar');\n  }\n\n  /**\n   * CSS class names\n   */\n  static get CSS() {\n    return {\n      blinked: 'status-bar--blinked',\n      loading: 'status-bar--loading'\n    };\n  }\n\n  /**\n   * Update text in the Status Bar\n   * @param {string} statusText - new text\n   */\n  set text(statusText) {\n    this.statusBar.textContent = statusText;\n\n    this.statusBar.classList.add(StatusBar.CSS.blinked);\n    window.setTimeout(() => {\n      this.statusBar.classList.remove(StatusBar.CSS.blinked);\n    }, 400);\n  }\n\n  /**\n   * Status Bar text getter\n   */\n  get text() {\n    return this.statusBar.textContent;\n  }\n\n  /**\n   * Set loading state\n   * @param {boolean} state - true|false\n   */\n  set loading(state) {\n    this.statusBar.classList.toggle(StatusBar.CSS.loading, state);\n  }\n}","/**\n * Two fingers swipe detection class\n */\nexport default class SwipeDetector {\n  /**\n  * @constructor\n  *\n  * @param {Element} el          - Element to handle swipe\n  * @param {Function} callback   - Callback for swipe event. Accepts {Boolean} directionRight parameter\n  *\n  *\n  * @property {Element} el\n  * @property {Function} callback\n  * @property {Boolean} swiped         -  Flag user to detect horisontal swipe by mousewheel\n  * @property {Timer} wheelTimeout     - Timer for detect swipe\n  */\n  constructor(el, callback) {\n    this.el = el;\n    this.callback = callback;\n    this.swiped = false;\n    this.wheelTimeout = null;\n\n    this.el.addEventListener('mousewheel', event => {\n      this.detectSwipe(event);\n    });\n  }\n\n  /**\n   * Detects two-fingers swipe and fires callback\n   * @fires this.callback\n   * @param {WheelEvent} event - mouse wheel\n   */\n  detectSwipe(event) {\n    /**\n     * Detect horisontal scroll\n     * @type {Boolean}\n     */\n    let isHorisontal = event.wheelDeltaY === 0;\n\n    /**\n     * Dont fire swipe event on small scrolls\n     * @type {Boolean}\n     */\n    const minimumDistance = 30;\n    let swipeEnoughLong = event.wheelDeltaX > minimumDistance || event.wheelDeltaX < -1 * minimumDistance;\n\n    if ( isHorisontal && swipeEnoughLong ) {\n      if (!this.swiped) {\n        this.swiped = true;\n\n        /**\n         * Pass directionRight parameter. True for right swipe, false for left swipe\n         */\n        this.callback(event.deltaX > 0);\n\n        this.wheelTimeout = window.setTimeout( () => {\n          this.swiped = false;\n        }, 1000);\n      }\n    }\n  }\n}\n","/**\n * DOM helper\n */\nimport $ from './dom';\n\nimport Dialog from './dialog';\n\n/**\n * @class       User\n * @classdesc   Authentication methods and user object\n *\n * @typedef {User} User\n * @property {Element} authButton - button 'Login with Google'\n * @property {Object} userData — current user`s data\n */\nexport default class User {\n  /**\n   * @constructor\n   */\n  constructor() {\n    this.authButton = $.get('js-auth-button');\n\n    this.userData = window.ipcRenderer.sendSync('user - get');\n\n    this.authButton.addEventListener('click', () => {\n      this.showAuth();\n    });\n  }\n\n  /**\n   * Opens auth popup\n   */\n  showAuth() {\n    let authResponse = window.ipcRenderer.sendSync('auth - google auth');\n\n    if (authResponse && authResponse.token) {\n      codex.notes.authObserver.login(authResponse);\n      window.ipcRenderer.send('user - sync');\n    } else {\n      Dialog.error('Authentication failed. Please, try again.');\n    }\n  }\n\n  /**\n   * Fills user panel\n   * @param  {Object} user\n   * @param  {String} user.id\n   * @param  {String} user.name\n   * @param  {String} user.photo\n   */\n  fillUserPanel(user) {\n    if (!user.name) return;\n\n    let userPanel = $.get('user-panel'),\n        photo = $.get('user-photo');\n\n    userPanel.classList.add('aside__header-avatar--filled');\n    photo.style.backgroundImage = `url(${user.photo})`;\n  }\n}\n","/**\n * Clipboard module\n */\nexport default class Clipboard {\n  /**\n   * copy to clipboards passed text\n   *\n   * @param {string} text\n   * @return {boolean}\n   */\n  static copy(text) {\n    let textarea = document.createElement('textarea'),\n        success = false;\n\n    Object.assign(textarea.style, {\n      position: 'fixed',\n      top: '-100%',\n      left: '-100%',\n      opacity: '0'\n    });\n\n    textarea.value = text;\n\n    document.body.appendChild(textarea);\n    textarea.select();\n\n    try {\n      success = document.execCommand('copy');\n    } catch (e) { }\n\n    document.body.removeChild(textarea);\n\n    return success;\n  }\n}","/**\n * Validate module\n */\nexport default class Validate {\n  /**\n   * Check for email validness\n   *\n   * @param {string} email\n   * @return {boolean}\n   */\n  static email(email) {\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n    return re.test(email);\n  }\n}\n","// removed by extract-text-webpack-plugin","module.exports = require(\"electron\");"],"sourceRoot":""}